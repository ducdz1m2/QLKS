{% extends 'base.html' %}
{% block title %}Danh s√°ch ng∆∞·ªùi d√πng{% endblock %}

{% block content %}
<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Danh S√°ch Kh√°ch H√†ng</title>
</head>

<body>
    <h2 class="text-center">Danh S√°ch Kh√°ch H√†ng</h2>
    <!-- N√∫t th√™m ph√≤ng -->
    <div class="text-end mb-3">
        <a href="{% url 'export_customer_excel' %}" class="btn btn-outline-primary ms-2" target="_blank">üì• Xu·∫•t danh s√°ch kh√°ch h√†ng</a>

    </div>

    <!-- Form t√¨m ki·∫øm h√≥a d∆°n -->
    <form method="GET" action="{% url 'search_customer' %}" class="mb-3 p-3 bg-light rounded shadow-sm">
        <div class="row g-2 align-items-center">
            <div class="col-md-3">
                <input type="text" name="TenKhachHang" class="form-control" placeholder="Nh·∫≠p t√™n kh√°ch h√†ng"
                    value="{{ request.GET.TenKhachHang }}">
            </div>
            <div class="col-md-3">
                <input type="text" name="DiaChi" class="form-control" placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ"
                    value="{{ request.GET.DiaChi }}">
            </div>
            <div class="col-md-3">
                <input type="text" name="SoDienThoai" class="form-control" placeholder="Nh·∫≠p s·ªë ƒëi·ªán th·ªçai"
                    value="{{ request.GET.SoDienThoai }}">
            </div>

            <div class="col-md-3">
                <button type="submit" class="btn btn-primary w-100">üîç T√¨m ki·∫øm</button>
            </div>
        </div>
    </form>

    <table class="table table-bordered table-hover">
        <thead class="table-dark">
            <tr>
                <th>M√£ Kh√°ch H√†ng</th>
                <th>T√™n Kh√°ch H√†ng</th>
                <th>ƒê·ªãa Ch·ªâ</th>
                <th>S·ªë ƒêi·ªán Tho·∫°i</th>
                <th>Thao T√°c</th>
            </tr>
        </thead>
        {% for customer in customers %}
        <tr>
            <td><a href="{% url 'detail_customer' customer.id %}" class="btn btn-primary btn-sm">
                    {{ customer.id }}
            </a></td>
            <td>{{ customer.TenKhachHang }}</td>
            <td>{{ customer.DiaChi }}</td>
            <td>{{ customer.SoDienThoai }}</td>
            <td> <!-- N√∫t ch·ªânh s·ª≠a -->
                <a href="{% url 'edit_customer' customer.id %}" class="btn btn-warning btn-sm">‚úèÔ∏è S·ª≠a</a>

                <!-- N√∫t x√≥a -->
                <form action="{% url 'delete_customer' customer.id %}" method="post" class="d-inline">
                    {% csrf_token %}
                    <input type="hidden" name="so_phong" value=""> <!-- ƒê·∫£m b·∫£o c√≥ name -->
                    <button type="submit" class="btn btn-danger btn-sm"
                        onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a kh√°ch h√†ng n√†y?');">
                        üóëÔ∏è X√≥a
                    </button>
            </td>
        </tr>
        {% endfor %}
    </table>
</body>

<style>
    a {
        text-decoration: none;
        color: #000;
    }
</style>

</html>
{% endblock %}